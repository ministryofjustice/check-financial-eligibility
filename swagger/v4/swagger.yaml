---
openapi: 3.0.1
info:
  title: API V4
  description: Check financial eligibility for legal aid
  contact:
    name: Github repository
    url: https://github.com/ministryofjustice/check-financial-eligibility
  version: v4
paths:
  "/assessments/{assessment_id}/applicant":
    post:
      summary: create applicant
      tags:
      - Assessment
      parameters:
      - name: assessment_id
        in: path
        description: |
          Assessment id to which this applicant relates.

          This must have been created prior to this call using POST /assessments endpoint
        required: true
        schema:
          type: string
      responses:
        '200':
          description: successful
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                applicant:
                  type: object
                  description: Object describing pertinent applicant details
                  properties:
                    date_of_birth:
                      type: date
                      example: '1992-07-22'
                      description: Applicant date of birth
                    involvement_type:
                      type: string
                      example: applicant
                      description: Applicant involvement type
                    has_partner_opponent:
                      type: boolean
                      example: false
                      description: Applicant has partner opponent
                    receives_qualifying_benefit:
                      type: boolean
                      example: false
                      description: Applicant receives qualifying benefit
        required: true
  "/assessments":
    post:
      summary: create assessment
      tags:
      - Assessment
      parameters: []
      responses:
        '200':
          description: successful
        '422':
          description: Unprocessable Entity
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                client_reference_id:
                  type: string
                  example: LA-FOO-BAR
                  description: Client's reference number for this application (free
                    text)
                submission_date:
                  type: string
                  description: Date of the original submission (iso8601 format)
                  example: '2022-05-16'
                proceeding_types:
                  type: object
                  description: Details of proceeding types in the application (v4
                    and above only)
                  properties:
                    ccms_codes:
                      type: array
                      description: Array of proceeding type CCMS codes
                      example:
                      - DA001
                      - SE013
                      items:
                        type: string
                        example: SE003
        required: true
  "/assessments/{id}":
    parameters:
    - name: id
      in: path
      description: Unique identifier of the assessment
      required: true
      schema:
        type: string
    get:
      summary: show assessment
      tags:
      - Assessment
      responses:
        '200':
          description: successful
  "/assessments/{assessment_id}/capitals":
    post:
      summary: create capital
      tags:
      - Capitals
      description: |
        == Description
          Adds details of an applicant's capital assets to an assessment.

        There are two types of assets:

        - bank_accounts The description should hold the Bank name and account
          number, and the value should hold the lowest balance during that calculation period (i.e. the
          month leading up to the submission date)

        - non-liquid capital items: These are other capital assets which are not immediately realisable as cash, such
          as stocks and shares, interest in a trust, valuable items, etc. Do not include property or vehicles which
          are added through separate endpoints.
      parameters:
      - name: assessment_id
        in: path
        description: |
          Assessment id to which this capital asset relates.

          This must have been created prior to this call using POST /assessments endpoint
        required: true
        schema:
          type: string
      responses:
        '200':
          description: successful
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                bank_accounts:
                  type: array
                  description: One or more account details
                  example:
                  - value: 1.01
                    description: test name 1
                  - value: 100.01
                    description: test name 2
                  items:
                    type: object
                    description: Account detail
                    properties:
                      value:
                        type: number
                        format: decimal
                      description:
                        type: string
        required: true
  "/state_benefit_type":
    get:
      summary: list state_benefit_types
      tags:
      - State benefit types
      responses:
        '200':
          description: successful
